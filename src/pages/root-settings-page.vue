<template>
  <div>
    {{ data }}
    <el-button @click="change">Change</el-button>
    <h2>üîç –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
    <input v-model="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏" />

    <p><strong>–°–ø–∏—Å–æ–∫ —Å –º–µ—Ç–æ–¥–æ–º:</strong></p>
    <ul>
      <li v-for="user in filterUsers()" :key="user.id">
        {{ user.name }}
      </li>
    </ul>

    <p><strong>–°–ø–∏—Å–æ–∫ —Å computed:</strong></p>
    <ul>
      <li v-for="user in filteredUsers" :key="user.id">
        {{ user.name }}
      </li>
    </ul>
  </div>
</template>

<script>
export default {
  data() {
    return {
      search: '',
      data: 0,
      users: [
        { id: 1, name: 'Alice' },
        { id: 2, name: 'Bob' },
        { id: 3, name: 'Charlie' },
        { id: 4, name: 'David' },
      ],
    }
  },
  methods: {
    filterUsers() {
      const start = performance.now()
      // –ò–º–∏—Ç–∞—Ü–∏—è —Ç—è–∂—ë–ª–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞
      for (let i = 0; i < 10000000; i++) {}
      const duration = performance.now() - start
      console.log(`‚è±Ô∏è üö® method took ${duration.toFixed(2)} ms`)
      return this.users.filter((user) =>
        user.name.toLowerCase().includes(this.search.toLowerCase()),
      )
    },
    change() {
      this.data = this.data + 1
    },
  },
  computed: {
    filteredUsers() {
      const start = performance.now()
      // –ò–º–∏—Ç–∞—Ü–∏—è —Ç—è–∂—ë–ª–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞
      for (let i = 0; i < 10000000; i++) {}
      const duration = performance.now() - start
      console.log(`‚è±Ô∏è ‚úÖ  Computed took ${duration.toFixed(2)} ms`)
      return this.users.filter((user) =>
        user.name.toLowerCase().includes(this.search.toLowerCase()),
      )
    },
  },
}
</script>
